OBJECTIF :
Corriger définitivement l’envoi des documents PDF en pièces jointes dans les emails SendPulse pour les demandes de prêt admin.
Les documents doivent arriver directement en pièces jointes (comme c’est déjà le cas pour les contrats signés).

RÈGLES STRICTES (À RESPECTER ABSOLUMENT) :
- Ne PAS introduire Cloudinary pour les documents PDF
- Ne PAS utiliser d’URL (fileUrl, lien externe, axios.get, fetch HTTP)
- Ne PAS modifier les emails existants qui fonctionnent déjà
- Ne PAS changer la logique SendPulse globale
- Ne PAS refactoriser l’architecture
- Ne PAS inventer de nouvelles fonctionnalités
- Corriger uniquement ce qui est nécessaire

CONTEXTE IMPORTANT :
- L’envoi de contrat signé fonctionne déjà correctement via un Buffer (sendSignedContractToAdmins)
- Cette logique DOIT servir de modèle
- Cloudinary doit rester UNIQUEMENT pour les photos de profil

TÂCHES À EFFECTUER (DANS CET ORDRE) :

1) Dans server/email.ts
   - SUPPRIMER complètement la fonction fetchFileAsBase64
   - SUPPRIMER toute utilisation de fileUrl pour les pièces jointes

2) Modifier la fonction sendLoanRequestAdminEmail :
   - Le paramètre documents NE DOIT PLUS contenir de fileUrl
   - Il doit être de la forme :
     {
       buffer: Buffer,
       fileName: string,
       mimeType: string
     }

3) Dans sendLoanRequestAdminEmail :
   - Construire les pièces jointes EXACTEMENT comme ceci :
     attachments = documents.map(doc => ({
       content: doc.buffer.toString('base64'),
       filename: doc.fileName,
       type: doc.mimeType
     }))

4) S’assurer que sendTransactionalEmail est appelé avec ces attachments
   - Ne PAS modifier la logique SendPulse existante
   - Ne PAS changer attachments_binary (il est correct)

5) Dans le backend (route / controller qui appelle sendLoanRequestAdminEmail) :
   - Passer les documents sous forme de Buffer (ex: req.file.buffer ou Buffer stocké)
   - Ne PAS générer ou stocker d’URL pour les documents
   - Ne PAS utiliser Cloudinary pour ces documents

6) Vérification finale obligatoire :
   - Les emails admin de demande de prêt doivent contenir les PDF en pièces jointes
   - Les fichiers doivent être lisibles et téléchargeables
   - Aucun lien externe ne doit être utilisé pour les documents

IMPORTANT :
- Si une partie du code utilise encore fileUrl pour les documents de prêt, la remplacer par un Buffer
- Ne PAS toucher à sendSignedContractToAdmins (il fonctionne correctement)
- Ne PAS modifier Cloudinary pour les photos de profil

RÉSULTAT ATTENDU :
- Lorsqu’une demande est envoyée depuis l’espace utilisateur,
  l’admin reçoit immédiatement l’email avec TOUS les documents PDF en pièces jointes,
  sans lien externe, sans Cloudinary, sans erreur.

PROCÉDER À LA CORRECTION MAINTENANT.
